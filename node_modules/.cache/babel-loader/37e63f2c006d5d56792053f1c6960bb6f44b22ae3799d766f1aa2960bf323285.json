{"ast":null,"code":"import { getFirestore, doc, getDoc, deleteDoc } from 'firebase/firestore';\nimport { getStorage, ref as storageRef, getDownloadURL } from 'firebase/storage';\nimport { auth } from '/src/firebase/index.js';\nexport default {\n  props: {\n    tweetData: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      localTweetData: {\n        ...this.tweetData\n      },\n      // Create a local copy\n      videoURL: '',\n      actualUsername: '',\n      actualProfileImage: '',\n      liked: false,\n      // Heart icon state\n      recycled: false,\n      // Recycle icon state\n      userID: null // Current user's ID\n    };\n  },\n\n  mounted() {\n    // Fetch video URL\n    const storagePath = this.tweetData.imageUrl;\n    if (storagePath) {\n      const storage = getStorage();\n      const videoRef = storageRef(storage, storagePath);\n      getDownloadURL(videoRef).then(url => {\n        this.videoURL = url;\n      }).catch(error => {\n        console.error('Error fetching video URL:', error);\n      });\n    }\n\n    // Fetch user data\n    this.fetchUserData();\n  },\n  methods: {\n    isImage(url) {\n      return /.*\\.(jpeg|jpg|png)/i.test(url);\n    },\n    isGif(url) {\n      return /.*\\.gif/i.test(url);\n    },\n    isVideo(url) {\n      return /.*\\.(mp4|webm|ogg|mov)/i.test(url);\n    },\n    async fetchUserData() {\n      try {\n        const user = auth.currentUser; // Get the current user\n        if (user) {\n          this.userId = user.uid; // Set userId based on the current user's UID\n\n          const db = getFirestore();\n          const userDocRef = doc(db, 'users', user.uid);\n          const userDocSnapshot = await getDoc(userDocRef);\n          if (userDocSnapshot.exists()) {\n            const userData = userDocSnapshot.data();\n            this.actualUsername = userData.username;\n            this.actualProfileImage = userData.profileImage;\n          } else {\n            console.error('User document does not exist');\n          }\n        } else {\n          console.error('User is not authenticated');\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n      }\n    },\n    toggleLike() {\n      this.liked = !this.liked;\n    },\n    toggleRecycle() {\n      this.recycled = !this.recycled;\n    },\n    async deleteTweet() {\n      try {\n        const db = getFirestore();\n        await deleteDoc(doc(db, 'tweets', this.tweetData.id));\n        this.$emit('tweetDeleted', this.tweetData.id);\n      } catch (error) {\n        console.error('Error deleting tweet:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["getFirestore","doc","getDoc","deleteDoc","getStorage","ref","storageRef","getDownloadURL","auth","props","tweetData","type","Object","required","default","data","localTweetData","videoURL","actualUsername","actualProfileImage","liked","recycled","userID","mounted","storagePath","imageUrl","storage","videoRef","then","url","catch","error","console","fetchUserData","methods","isImage","test","isGif","isVideo","user","currentUser","userId","uid","db","userDocRef","userDocSnapshot","exists","userData","username","profileImage","toggleLike","toggleRecycle","deleteTweet","id","$emit"],"sources":["/Users/kharelthompson/Coding/tc23/src/components/TweetPost.vue"],"sourcesContent":["<template>\n  <div v-if=\"tweetData.content\" class=\"tweet-post\">\n    <router-link :to=\"{ name: 'profile', params: { username: actualUsername } }\">\n      <v-avatar v-if=\"actualProfileImage\">\n        <img :src=\"actualProfileImage\">\n      </v-avatar>\n    </router-link>\n    &nbsp;\n    <strong v-if=\"actualUsername\">\n      <router-link :to=\"{ name: 'profile', params: { username: actualUsername } }\">@{{ actualUsername }}</router-link>\n    </strong>\n\n    <p v-if=\"tweetData.content\">{{ tweetData.content }}</p>\n\n    <!-- Display media based on its type -->\n    <v-img v-if=\"isImage(tweetData.imageUrl) || isGif(tweetData.imageUrl)\" :src=\"tweetData.imageUrl\" aspect-ratio=\"2\"></v-img>\n\n    <!-- Display Video -->\n    <video v-if=\"isVideo(tweetData.imageUrl)\" controls preload=\"auto\" playsinline>\n      <source :src=\"tweetData.imageUrl\" type=\"video/mp4\">\n      Your browser does not support the video tag.\n    </video>\n\n<!-- Bottom Row for Icons and Delete Button -->\n    <v-row class=\"bottom-row\">\n      <!-- Heart (Like) Icon -->\n      <v-col cols=\"4\">\n        <v-icon @click=\"toggleLike\" :color=\"liked ? 'red' : ''\" class=\"heart-icon\">\n          mdi-heart\n        </v-icon>\n      </v-col>\n\n      <!-- Recycle (Retweet) Icon -->\n      <v-col cols=\"4\">\n        <v-icon @click=\"toggleRecycle\" :color=\"recycled ? 'green' : ''\" class=\"recycle-icon\">\n          mdi-recycle\n        </v-icon>\n      </v-col>\n\n      <!-- Delete Button (Show if the current user has the same userId) -->\n      <v-col cols=\"4\">\n        <button v-if=\"userId === tweetData.userId\" @click=\"deleteTweet\">Delete</button>\n      </v-col>\n    </v-row>\n  </div>\n\n</template>\n\n<script>\nimport { getFirestore, doc, getDoc, deleteDoc } from 'firebase/firestore';\nimport { getStorage, ref as storageRef, getDownloadURL } from 'firebase/storage';\nimport { auth } from '/src/firebase/index.js';\n\n\nexport default {\n  props: {\n    tweetData: {\n      type: Object,\n      required: true,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return {\n      localTweetData: { ...this.tweetData }, // Create a local copy\n      videoURL: '',\n      actualUsername: '',\n      actualProfileImage: '',\n      liked: false,    // Heart icon state\n      recycled: false, // Recycle icon state\n      userID: null,    // Current user's ID\n    };\n  },\n  mounted() {\n    // Fetch video URL\n    const storagePath = this.tweetData.imageUrl;\n\n    if (storagePath) {\n      const storage = getStorage();\n      const videoRef = storageRef(storage, storagePath);\n\n      getDownloadURL(videoRef)\n        .then((url) => {\n          this.videoURL = url;\n        })\n        .catch((error) => {\n          console.error('Error fetching video URL:', error);\n        });\n    }\n\n    // Fetch user data\n    this.fetchUserData();\n  },\n  methods: {\n    isImage(url) {\n      return /.*\\.(jpeg|jpg|png)/i.test(url);\n    },\n    isGif(url) {\n      return /.*\\.gif/i.test(url);\n    },\n    isVideo(url) {\n      return /.*\\.(mp4|webm|ogg|mov)/i.test(url);\n    },\n    async fetchUserData() {\n    try {\n      const user = auth.currentUser; // Get the current user\n      if (user) {\n        this.userId = user.uid; // Set userId based on the current user's UID\n\n        const db = getFirestore();\n        const userDocRef = doc(db, 'users', user.uid);\n        const userDocSnapshot = await getDoc(userDocRef);\n\n        if (userDocSnapshot.exists()) {\n          const userData = userDocSnapshot.data();\n          this.actualUsername = userData.username;\n          this.actualProfileImage = userData.profileImage;\n        } else {\n          console.error('User document does not exist');\n        }\n      } else {\n        console.error('User is not authenticated');\n      }\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    }\n  },\n    toggleLike() {\n      this.liked = !this.liked;\n    },\n    toggleRecycle() {\n      this.recycled = !this.recycled;\n    },\n    async deleteTweet() {\n      try {\n        const db = getFirestore();\n        await deleteDoc(doc(db, 'tweets', this.tweetData.id));\n        this.$emit('tweetDeleted', this.tweetData.id);\n      } catch (error) {\n        console.error('Error deleting tweet:', error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n\n.tweet-post {\n  margin-bottom: 90px;\n  border: 1px solid #e0e0e0;\n  padding: 10px;\n  margin-top: 30px;\n  border-radius: 5px;\n}\n\n.heart-icon, .recycle-icon {\n  cursor: pointer;\n  font-size: 24px;\n  color: gray; /* Set the default gray color */\n  padding: 6px;\n  margin: 0 8px;\n  transition: color 0.3s; /* Only transition the color property */\n}\n\n.heart-icon.liked {\n  color: red; /* Change to red when liked */\n}\n\n.recycle-icon.recycled {\n  color: green; /* Change to green when recycled */\n}\n\n\n.tweet-post button {\n  display: block;\n  background-color: red;\n  color: white;\n}\n\n.bottom-row .v-col {\n  margin: 0 4px; /* Adjust the horizontal spacing here (e.g., 4px for half the space) */\n}\n\n/* Style for the delete button column */\n.delete-button-col {\n  text-align: right;\n}\n\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}