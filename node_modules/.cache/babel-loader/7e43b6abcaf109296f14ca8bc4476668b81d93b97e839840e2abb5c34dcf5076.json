{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-bf1681ae\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Your profile page\", -1 /* HOISTED */));\nconst _hoisted_2 = [\"src\"];\nexport function render(_ctx, _cache) {\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_SideBar = _resolveComponent(\"SideBar\");\n  const _component_TweetsList = _resolveComponent(\"TweetsList\");\n  const _component_TrendingPosts = _resolveComponent(\"TrendingPosts\");\n  const _component_WhoToFollow = _resolveComponent(\"WhoToFollow\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_ctx.loading ? (_openBlock(), _createBlock(_component_v_row, {\n    key: 0\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_col, {\n      class: \"text-center\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" Loading... \")]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Your existing content wrapped in a v-else \"), _createVNode(_component_v_row, null, {\n    default: _withCtx(() => [_createVNode(_component_v_row, null, {\n      default: _withCtx(() => [_createVNode(_component_v_col, {\n        cols: \"3\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_SideBar)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_col, {\n        cols: \"6\"\n      }, {\n        default: _withCtx(() => [_hoisted_1, _createCommentVNode(\" Profile Picture \"), _ctx.profileImage ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: _ctx.profileImage,\n          alt: \"Profile\",\n          width: \"100\"\n        }, null, 8 /* PROPS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"input\", {\n          type: \"file\",\n          onChange: _cache[0] || (_cache[0] = (...args) => _ctx.uploadImage && _ctx.uploadImage(...args))\n        }, null, 32 /* HYDRATE_EVENTS */), _createCommentVNode(\" Username \"), _createElementVNode(\"p\", null, \"@\" + _toDisplayString(_ctx.username), 1 /* TEXT */), _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.tempUsername = $event),\n          placeholder: \"Choose a username\"\n        }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.tempUsername]]), _createCommentVNode(\" Submit Button \"), _createElementVNode(\"button\", {\n          onClick: _cache[2] || (_cache[2] = (...args) => _ctx.updateProfile && _ctx.updateProfile(...args))\n        }, \"Update Profile\"), _createVNode(_component_TweetsList, {\n          tweets: _ctx.tweets,\n          onRemoveTweet: _ctx.removeTweet\n        }, null, 8 /* PROPS */, [\"tweets\", \"onRemoveTweet\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_col, {\n        cols: \"3\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_TrendingPosts, {\n          topics: _ctx.trendingTopics,\n          class: \"sideB\"\n        }, null, 8 /* PROPS */, [\"topics\"]), _createVNode(_component_WhoToFollow, {\n          users: _ctx.usersToFollow,\n          class: \"sideB\"\n        }, null, 8 /* PROPS */, [\"users\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  })], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_ctx","loading","_createBlock","_component_v_row","key","_createVNode","_component_v_col","class","_Fragment","_createCommentVNode","cols","_component_SideBar","_hoisted_1","profileImage","src","alt","width","type","onChange","_cache","args","uploadImage","_toDisplayString","username","tempUsername","$event","placeholder","onClick","updateProfile","_component_TweetsList","tweets","onRemoveTweet","removeTweet","_component_TrendingPosts","topics","trendingTopics","_component_WhoToFollow","users","usersToFollow"],"sources":["/Users/kharelthompson/Coding/tc23/src/components/Profile.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row v-if=\"loading\">\n      <v-col class=\"text-center\">\n        Loading...\n      </v-col>\n    </v-row>\n\n    <!-- Your existing content wrapped in a v-else -->\n    <v-row v-else>\n      <v-row>\n        <v-col cols=\"3\">\n          <SideBar />\n        </v-col>\n        <v-col cols=\"6\">\n          <h1>Your profile page</h1>\n\n          <!-- Profile Picture -->\n          <img :src=\"profileImage\" alt=\"Profile\" width=\"100\" v-if=\"profileImage\" />\n          <input type=\"file\" @change=\"uploadImage\" />\n\n          <!-- Username -->\n          <p>@{{ username }}</p>\n          <input v-model=\"tempUsername\" placeholder=\"Choose a username\" />\n\n          <!-- Submit Button -->\n          <button @click=\"updateProfile\">Update Profile</button>\n\n          <TweetsList :tweets=\"tweets\" @removeTweet=\"removeTweet\" />\n        </v-col>\n\n        <v-col cols=\"3\">\n          <TrendingPosts :topics=\"trendingTopics\" class=\"sideB\" />\n          <WhoToFollow :users=\"usersToFollow\" class=\"sideB\" />\n        </v-col>\n      </v-row>\n    </v-row>\n  </div>\n</template>\n\n\n<script>\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport {\n  getFirestore,\n  collection,\n  doc,\n  getDoc,\n  query,\n  orderBy,\n  getDocs,\n} from 'firebase/firestore';\n\nimport SideBar from './SideBar.vue';\nimport TrendingPosts from './TrendingPosts.vue';\n\n\n\nexport default {\n    components: {\n    SideBar,\n    TrendingPosts\n  },\n  name: 'ProfilePage',\n  data() {\n    return {\n      tweets: [],\n      loading: true,\n      userID: null,\n      username: '',\n      profileImage: '',\n    };\n     trendingTopics: [\n      { title: \"MLB\", subtitle: \"2 hours ago\" },\n      { title: \"Anthony Davis\", subtitle: \"1,032 posts\" }\n    ],\n    usersToFollow: [\n      { name: \"AmazingAyo\" }\n    ]\n  },\n  methods: {\n    async fetchUserProfile(userId) {\n      const db = getFirestore();\n      const userDocRef = doc(db, 'users', userId); // Adjust the path as needed\n      return await getDoc(userDocRef);\n    },\n    async fetchTweets() {\n      const db = getFirestore();\n      const tweetsCollection = collection(db, 'tweets');\n      const tweetsQuery = query(\n        tweetsCollection,\n        orderBy('timestamp', 'desc')\n      );\n\n      const tweetDocs = await getDocs(tweetsQuery);\n      this.tweets = tweetDocs.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      console.log('Fetched tweets in parent:', this.tweets);\n    },\n  },\n  mounted() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        this.userID = user.uid;\n        const userProfile = await this.fetchUserProfile(user.uid);\n\n        if (userProfile.exists()) {\n          this.username = userProfile.data().username || ''; // Handle undefined username\n          this.profileImage = userProfile.data().profileImage || ''; // Handle undefined profileImage\n        } else {\n          console.error('User profile does not exist:', user.uid);\n        }\n\n        this.fetchTweets();\n        this.loading = false;\n      } else {\n        this.loading = false;\n        console.log('User is not authenticated');\n      }\n    });\n  },\n};\n</script>\n\n\n\n<style scoped>\n.sideB {\n  margin-bottom: 30px;\n  border: 1px solid #e0e0e0;\n  padding: 0px 10px;\n  margin-top: 0px;\n  border-radius: 5px;\n}\n</style>\n"],"mappings":";;gEAeUA,mBAAA,CAA0B,YAAtB,mBAAiB;;;;;;;;;uBAd7BC,mBAAA,CAoCM,cAnCSC,IAAA,CAAAC,OAAO,I,cAApBC,YAAA,CAIQC,gBAAA;IAAAC,GAAA;EAAA;sBAHN,MAEQ,CAFRC,YAAA,CAEQC,gBAAA;MAFDC,KAAK,EAAC;IAAa;wBAAC,MAE3B,C,iBAF2B,cAE3B,E;;;;;uBAIFR,mBAAA,CA2BQS,SAAA;IAAAJ,GAAA;EAAA,IA5BRK,mBAAA,+CAAkD,EAClDJ,YAAA,CA2BQF,gBAAA;sBA1BN,MAyBQ,CAzBRE,YAAA,CAyBQF,gBAAA;wBAxBN,MAEQ,CAFRE,YAAA,CAEQC,gBAAA;QAFDI,IAAI,EAAC;MAAG;0BACb,MAAW,CAAXL,YAAA,CAAWM,kBAAA,E;;UAEbN,YAAA,CAeQC,gBAAA;QAfDI,IAAI,EAAC;MAAG;0BACb,MAA0B,CAA1BE,UAA0B,EAE1BH,mBAAA,qBAAwB,EACiCT,IAAA,CAAAa,YAAY,I,cAArEd,mBAAA,CAAyE;;UAAnEe,GAAG,EAAEd,IAAA,CAAAa,YAAY;UAAEE,GAAG,EAAC,SAAS;UAACC,KAAK,EAAC;kFAC7ClB,mBAAA,CAA2C;UAApCmB,IAAI,EAAC,MAAM;UAAEC,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEpB,IAAA,CAAAqB,WAAA,IAAArB,IAAA,CAAAqB,WAAA,IAAAD,IAAA,CAAW;2CAEvCX,mBAAA,cAAiB,EACjBX,mBAAA,CAAsB,WAAnB,GAAC,GAAAwB,gBAAA,CAAGtB,IAAA,CAAAuB,QAAQ,kB,gBACfzB,mBAAA,CAAgE;qEAAhDE,IAAA,CAAAwB,YAAY,GAAAC,MAAA;UAAEC,WAAW,EAAC;uDAA1B1B,IAAA,CAAAwB,YAAY,E,GAE5Bf,mBAAA,mBAAsB,EACtBX,mBAAA,CAAsD;UAA7C6B,OAAK,EAAAR,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEpB,IAAA,CAAA4B,aAAA,IAAA5B,IAAA,CAAA4B,aAAA,IAAAR,IAAA,CAAa;WAAE,gBAAc,GAE7Cf,YAAA,CAA0DwB,qBAAA;UAA7CC,MAAM,EAAE9B,IAAA,CAAA8B,MAAM;UAAGC,aAAW,EAAE/B,IAAA,CAAAgC;;;UAG7C3B,YAAA,CAGQC,gBAAA;QAHDI,IAAI,EAAC;MAAG;0BACb,MAAwD,CAAxDL,YAAA,CAAwD4B,wBAAA;UAAxCC,MAAM,EAAElC,IAAA,CAAAmC,cAAc;UAAE5B,KAAK,EAAC;6CAC9CF,YAAA,CAAoD+B,sBAAA;UAAtCC,KAAK,EAAErC,IAAA,CAAAsC,aAAa;UAAE/B,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}