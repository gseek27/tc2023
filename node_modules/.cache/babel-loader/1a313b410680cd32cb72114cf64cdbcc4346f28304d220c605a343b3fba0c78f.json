{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_textarea = _resolveComponent(\"v-textarea\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_v_textarea, {\n    modelValue: $data.tweetContent,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.tweetContent = $event),\n    placeholder: \"What is happening?!\"\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" Accept images, videos, and GIFs \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*,video/*,.gif\",\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.onFileChange && $options.onFileChange(...args))\n  }, null, 32 /* HYDRATE_EVENTS */), _createVNode(_component_v_btn, {\n    onClick: $options.postTweet\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Post\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_v_textarea","$data","tweetContent","$event","placeholder","_createCommentVNode","_createElementVNode","type","accept","onChange","_cache","args","$options","onFileChange","_component_v_btn","onClick","postTweet"],"sources":["/Users/kharelthompson/Coding/tc23/src/components/TweetBox.vue"],"sourcesContent":["<template>\n  <div>\n    <v-textarea v-model=\"tweetContent\" placeholder=\"What is happening?!\"></v-textarea>\n    <!-- Accept images, videos, and GIFs -->\n    <input type=\"file\" accept=\"image/*,video/*,.gif\" @change=\"onFileChange\">\n    <v-btn @click=\"postTweet\">Post</v-btn>\n  </div>\n</template>\n\n<script>\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { addDoc, collection, serverTimestamp } from 'firebase/firestore';\nimport { db } from \"/src/firebase/index.js\";\n\nexport default {\n  data() {\n    return {\n      tweetContent: \"\",\n      tweetMedia: null,\n      mediaType: null\n    };\n  },\n  methods: {\n    async postTweet() {\n      try {\n        let mediaUrl = null;\n\n        if (this.tweetMedia) {\n          const storage = getStorage();\n\n          // Adjust pathing to accommodate different media types\n          const mediaRef = storageRef(storage, `${this.mediaType}s/${this.tweetMedia.name}`);\n\n          await uploadBytes(mediaRef, this.tweetMedia);\n          mediaUrl = await getDownloadURL(mediaRef);\n          console.log('Media URL:', mediaUrl)\n        }\n\n        const payload = {\n          content: this.tweetContent,\n          timestamp: serverTimestamp()\n        };\n\n        if (mediaUrl) {\n          payload.mediaUrl = mediaUrl;\n        }\n\n        await addDoc(collection(db, \"tweets\"), payload);\n\n        this.tweetContent = \"\"; // clear the textarea after posting\n        this.tweetMedia = null;\n        this.$emit('tweetPosted');\n        console.log('Event emitted!')\n       // this.fetchTweets();\n      } catch (error) {\n        console.error(\"Error posting tweet:\", error);\n      }\n    },\n\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (file) {\n        this.tweetMedia = file;\n        \n        if (file.type.startsWith(\"image\")) {\n          this.mediaType = \"image\";\n        } else if (file.type.startsWith(\"video\")) {\n          this.mediaType = \"video\";\n        } else if (file.name.endsWith(\".gif\")) {\n          this.mediaType = \"gif\";\n        }\n      }\n    }\n  }\n};\n</script>\n"],"mappings":";;;;uBACEA,mBAAA,CAKM,cAJJC,YAAA,CAAkFC,qBAAA;gBAA7DC,KAAA,CAAAC,YAAY;+DAAZD,KAAA,CAAAC,YAAY,GAAAC,MAAA;IAAEC,WAAW,EAAC;2CAC/CC,mBAAA,qCAAwC,EACxCC,mBAAA,CAAwE;IAAjEC,IAAI,EAAC,MAAM;IAACC,MAAM,EAAC,sBAAsB;IAAEC,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;qCACtEZ,YAAA,CAAsCe,gBAAA;IAA9BC,OAAK,EAAEH,QAAA,CAAAI;EAAS;sBAAE,MAAI,C,iBAAJ,MAAI,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}