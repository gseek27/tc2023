{"ast":null,"code":"import { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, doc, getDoc, query, orderBy, getDocs } from 'firebase/firestore';\nimport SideBar from './SideBar.vue';\nimport TrendingPosts from './TrendingPosts.vue';\nexport default {\n  components: {\n    SideBar,\n    TrendingPosts\n  },\n  name: 'ProfilePage',\n  data() {\n    return {\n      tweets: [],\n      loading: true,\n      userID: null,\n      username: '',\n      profileImage: '',\n      trendingTopics: [{\n        title: \"MLB\",\n        subtitle: \"2 hours ago\"\n      }, {\n        title: \"Anthony Davis\",\n        subtitle: \"1,032 posts\"\n      }],\n      usersToFollow: [{\n        name: \"AmazingAyo\"\n      }]\n    };\n  },\n  methods: {\n    async fetchUserProfile(userId) {\n      const db = getFirestore();\n      const userDocRef = doc(db, 'users', userId); // Adjust the path as needed\n      return await getDoc(userDocRef);\n    },\n    async fetchTweets() {\n      const db = getFirestore();\n      const tweetsCollection = collection(db, 'tweets');\n      const tweetsQuery = query(tweetsCollection, orderBy('timestamp', 'desc'));\n      const tweetDocs = await getDocs(tweetsQuery);\n      this.tweets = tweetDocs.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      console.log('Fetched tweets in parent:', this.tweets);\n    }\n  },\n  mounted() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, async user => {\n      if (user) {\n        this.userID = user.uid;\n        const userProfile = await this.fetchUserProfile(user.uid);\n        if (userProfile.exists()) {\n          this.username = userProfile.data().username || ''; // Handle undefined username\n          this.profileImage = userProfile.data().profileImage || ''; // Handle undefined profileImage\n        } else {\n          console.error('User profile does not exist:', user.uid);\n        }\n        this.fetchTweets();\n        this.loading = false;\n      } else {\n        this.loading = false;\n        console.log('User is not authenticated');\n      }\n    });\n  }\n};","map":{"version":3,"names":["getAuth","onAuthStateChanged","getFirestore","collection","doc","getDoc","query","orderBy","getDocs","SideBar","TrendingPosts","components","name","data","tweets","loading","userID","username","profileImage","trendingTopics","title","subtitle","usersToFollow","methods","fetchUserProfile","userId","db","userDocRef","fetchTweets","tweetsCollection","tweetsQuery","tweetDocs","docs","map","id","console","log","mounted","auth","user","uid","userProfile","exists","error"],"sources":["/Users/kharelthompson/Coding/tc23/src/components/Profile.vue"],"sourcesContent":["<template>\n  <div>\n    <v-row v-if=\"loading\">\n      <v-col class=\"text-center\">\n        Loading...\n      </v-col>\n    </v-row>\n\n    <!-- Your existing content wrapped in a v-else -->\n    <v-row v-else>\n      <v-row>\n        <v-col cols=\"3\">\n          <SideBar />\n        </v-col>\n        <v-col cols=\"6\">\n          <h1>Your profile page</h1>\n\n          <!-- Profile Picture -->\n          <img :src=\"profileImage\" alt=\"Profile\" width=\"100\" v-if=\"profileImage\" />\n          <input type=\"file\" @change=\"uploadImage\" />\n\n          <!-- Username -->\n          <p>@{{ username }}</p>\n          <input v-model=\"tempUsername\" placeholder=\"Choose a username\" />\n\n          <!-- Submit Button -->\n          <button @click=\"updateProfile\">Update Profile</button>\n\n          <TweetsList :tweets=\"tweets\" @removeTweet=\"removeTweet\" />\n        </v-col>\n\n        <v-col cols=\"3\">\n          <TrendingPosts :topics=\"trendingTopics\" class=\"sideB\" />\n          <WhoToFollow :users=\"usersToFollow\" class=\"sideB\" />\n        </v-col>\n      </v-row>\n    </v-row>\n  </div>\n</template>\n\n\n<script>\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport {\n  getFirestore,\n  collection,\n  doc,\n  getDoc,\n  query,\n  orderBy,\n  getDocs,\n} from 'firebase/firestore';\n\nimport SideBar from './SideBar.vue';\nimport TrendingPosts from './TrendingPosts.vue';\n\n\n\nexport default {\n    components: {\n    SideBar,\n    TrendingPosts\n  },\n  name: 'ProfilePage',\n  data() {\n    return {\n      tweets: [],\n      loading: true,\n      userID: null,\n      username: '',\n      profileImage: '',\n       trendingTopics: [\n      { title: \"MLB\", subtitle: \"2 hours ago\" },\n      { title: \"Anthony Davis\", subtitle: \"1,032 posts\" }\n    ],\n    usersToFollow: [\n      { name: \"AmazingAyo\" }\n    ]\n    };\n  },\n  methods: {\n    async fetchUserProfile(userId) {\n      const db = getFirestore();\n      const userDocRef = doc(db, 'users', userId); // Adjust the path as needed\n      return await getDoc(userDocRef);\n    },\n    async fetchTweets() {\n      const db = getFirestore();\n      const tweetsCollection = collection(db, 'tweets');\n      const tweetsQuery = query(\n        tweetsCollection,\n        orderBy('timestamp', 'desc')\n      );\n\n      const tweetDocs = await getDocs(tweetsQuery);\n      this.tweets = tweetDocs.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      console.log('Fetched tweets in parent:', this.tweets);\n    },\n  },\n  mounted() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        this.userID = user.uid;\n        const userProfile = await this.fetchUserProfile(user.uid);\n\n        if (userProfile.exists()) {\n          this.username = userProfile.data().username || ''; // Handle undefined username\n          this.profileImage = userProfile.data().profileImage || ''; // Handle undefined profileImage\n        } else {\n          console.error('User profile does not exist:', user.uid);\n        }\n\n        this.fetchTweets();\n        this.loading = false;\n      } else {\n        this.loading = false;\n        console.log('User is not authenticated');\n      }\n    });\n  },\n};\n</script>\n\n\n\n<style scoped>\n.sideB {\n  margin-bottom: 30px;\n  border: 1px solid #e0e0e0;\n  padding: 0px 10px;\n  margin-top: 0px;\n  border-radius: 5px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}